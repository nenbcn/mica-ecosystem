; PlatformIO Root Configuration - MICA Ecosystem Monorepo
; This file points to individual apps for development
; Architecture by: gaesca04 (ingeniero inform√°tico)

[platformio]
; Default environment points to recirculator app
default_envs = esp32_c3_recirculator

; Source directory for application code
src_dir = apps/recirculator/src

; Workspace description
description = MICA IoT Ecosystem - Monorepo with shared libraries

[env:esp32_c3_recirculator]
; This environment compiles the recirculator app
platform = espressif32
board = seeed_xiao_esp32c3
framework = arduino
monitor_speed = 115200

; Library dependency mode
lib_ldf_mode = chain+

; Extra library directories (for organized lib/ subdirectories)
lib_extra_dirs = 
    lib/services
    lib/drivers
    lib/utils

; Include paths
build_flags = 
    -D ESP32_C3
    -D CORE_DEBUG_LEVEL=1
    -D CONFIG_LOG_DEFAULT_LEVEL=1
    -D CONFIG_LOG_DEFAULT_LEVEL_WIFI=0
    ; Global configs
    -Iinclude
    ; App source
    -Iapps/recirculator/src
    -Iapps/recirculator/src/drivers
    ; Shared library headers (for <Log.h>, <button_manager.h>, etc.)
    -Ilib/utils/Log
    -Ilib/utils/UtcClock
    -Ilib/services/wifi_connect
    -Ilib/services/wifi_config_mode
    -Ilib/services/mqtt_handler
    -Ilib/services/ota_manager
    -Ilib/services/eeprom_config
    -Ilib/services/device_id
    -Ilib/drivers/button_manager
    -Ilib/drivers/led_manager

; External dependencies (same as original recirculator)
lib_deps =
    ESP Async WebServer
    EEPROM
    WiFi
    HTTPClient
    Preferences
    knolleary/PubSubClient@^2.8.0
    me-no-dev/AsyncTCP
    bblanchon/ArduinoJson@^6.18.5
    adafruit/Adafruit NeoPixel@^1.11.0
    paulstoffregen/OneWire
    milesburton/DallasTemperature
    Adafruit/Adafruit SSD1306

lib_ignore =
    AsyncTCP_RP2040W

; Shared libraries from lib/ (PlatformIO finds these automatically)
; No lib_extra_dirs needed - lib/ is standard location
